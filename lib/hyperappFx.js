!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(n.hyperappFx={})}(this,function(n){"use strict";function f(n,t){var r,o={};for(r in n)o[r]=n[r];for(r in t)o[r]=t[r];return o}var r="action",t="frame",o="delay",u="time",c="log",a="http",d="event",l="keydown",s="keyup",p="random",v="debounce",m="throttle";function i(){var n={};n[r]=function(n,t){t(n.name)(n.data)},n[t]=function(t,r){requestAnimationFrame(function(n){r(t.action)(n)})},n[o]=function(n,t){setTimeout(function(){t(n.action)(n.data)},n.duration)},n[u]=function(n,t){t(n.action)(performance.now())},n[c]=function(n){console.log.apply(null,n.args)},n[a]=function(t,r){var o,i,e,u=f({response:"json",error:t.action},t.options),n=(o=u,i=["response","error"],e={},Object.keys(o).filter(function(n){return-1===i.indexOf(n)}).forEach(function(n){e[n]=o[n]}),e);fetch(t.url,n).then(function(n){if(!n.ok)throw n;return n}).then(function(n){return n[u.response]()}).then(function(n){r(t.action)(n)}).catch(function(n){r(u.error)(n)})},n[d]=function(n,t){t(n.action)(n.event)},n[l]=function(t,r){document.onkeydown=function(n){r(t.action)(n)}},n[s]=function(t,r){document.onkeyup=function(n){r(t.action)(n)}},n[p]=function(n,t){var r=Math.random()*(n.max-n.min)+n.min;t(n.action)(r)};var i={};n[v]=function(n,t){return r=n,o=t,clearTimeout(i[r.action]),void(i[r.action]=setTimeout(function(){o(r.action)(r.data)},r.wait));var r,o};var e={};return n[m]=function(n,t){return o=t,void(e[(r=n).action]||(o(r.action)(r.data),e[r.action]=!0,setTimeout(function(){e[r.action]=!1},r.rate)));var r,o},n}var h=Array.isArray,y=function(n){return"function"==typeof n};function w(n,t,r,o){if(!h(r))return r;if(h(r[0]))for(var i in r)w(n,t,r[i],o);else if(r.length){var e=function(n,i){return function n(t,r){var o=t[r[0]];if(!o)throw new Error("couldn't find action: "+i);return 1===r.length?o:n(o,r.slice(1))}(n,i.split("."))}.bind(null,n),u=r[0],c=f(r[1],{event:t}),a=o[u];if(!y(a))throw new Error("no such fx type: "+u);a(c,e)}}function b(t,r,o){return function(n){w(t,n,r,o)}}function x(o,u){return function(n,t){var r=o(n,t);return function n(t,r){if("object"==typeof r){for(var o in r.attributes){var i=r.attributes[o];h(i)&&(r.attributes[o]=b(t,i,u))}for(var e in r.children)y(r.children[e])?r.children[e]=x(r.children[e],u):n(t,r.children[e])}}(t,r),r}}function e(u,c){return function(n,t,r,o){var i=function r(o,e){return Object.keys(o||{}).reduce(function(n,t){var i=o[t];return n[t]=y(i)?function(o){return function(n,t){var r=i(o);return w(t,null,r=y(r)?r(n,t):r,e)}}:r(i,e),n},{})}(t,u),e=x(r,u);return c(n,i,e,o)}}n.withFx=function(n){var t=i();if("function"==typeof n)return e(t,n);for(var r in n)t[r]=n[r];return function(n){return e(t,n)}},n.fxIf=function(n){return n.filter(function(n){return n[0]}).map(function(n){return n[1]})},n.action=function(n,t){return[r,{name:n,data:t}]},n.frame=function(n){return[t,{action:n}]},n.delay=function(n,t,r){return[o,{duration:n,action:t,data:r}]},n.time=function(n){return[u,{action:n}]},n.log=function(){return[c,{args:arguments}]},n.http=function(n,t,r){return[a,{url:n,action:t,options:r}]},n.event=function(n){return[d,{action:n}]},n.keydown=function(n){return[l,{action:n}]},n.keyup=function(n){return[s,{action:n}]},n.random=function(n,t,r){return[p,{action:n,min:t||0,max:r||1}]},n.debounce=function(n,t,r){return[v,{wait:n,action:t,data:r}]},n.throttle=function(n,t,r){return[m,{rate:n,action:t,data:r}]}});
//# sourceMappingURL=hyperappFx.js.map v1.0.0
